<mat-toolbar [color]="pageNavbar.color">
    <ws-widget-btn-page-back [widgetData]="{ url: '/page/home' }"></ws-widget-btn-page-back>

    <span class="margin-left-xs text-truncate span-class">
        <span class="visible-xs-inline nav-bar-style" i18n>People</span>
    </span>
    <!-- for search bar in  web view -->
    <div class="search-container">
        <ng-container>
            <label class="expandSearchGroup">
                <mat-icon matPrefix class="searchIcon" (click)="triggerGlobalSearch()">search</mat-icon>
                <input class="forms-control" (keyup.enter)="triggerGlobalSearch()" type="text"
                    placeholder="Search Users" name="search" [formControl]="globalSearch">
            </label>
        </ng-container>
    </div>
    <!-- for search bar in  mobile view -->
    <ng-container *ngIf="(isXSmall$ | async) === true">
        <div class="maticonallign">
            <button mat-icon-button (click)="showSearchBar()">
                <mat-icon class="text-color">search</mat-icon>
            </button>
        </div>
    </ng-container>
</mat-toolbar>

<!-- for search bar in  mobile view -->
<section class="search-mobile-container">
    <div *ngIf="(isXSmall$ | async) === true" class="flex">
        <mat-card class="card-container" *ngIf="isEnabledSearch === true">
            <div class="flex">
                <div>
                    <ng-container>
                        <label class="expandSearchGroupMobile">
                            <mat-icon class="searchIconMobile">search</mat-icon>
                            <input class="forms-control-mobile" type="text" placeholder="Search Users" name="search"
                                [formControl]="globalSearch">
                        </label>
                    </ng-container>
                </div>
                <div class="align-icon">
                    <button mat-icon-button (click)="disableSearchbar()">
                        <mat-icon>close</mat-icon>
                    </button>
                </div>
            </div>
        </mat-card>
    </div>
</section>

<div class="wrapper">
    <div infiniteScroll [infiniteScrollDistance]="scrollDistance" [infiniteScrollThrottle]="scrollThrottle"
        (scrolled)="onScroll($event)" [ngClass]="{'scroll-infinite': (apiData$ | async)?.length }"
        class="w-100 h-100 flex-row flex-wrap justify-center fix-margin">
        <ng-container [ngTemplateOutlet]="cardTemplate"></ng-container>
    </div>
    <ng-container *ngIf="(error$ | async) === false">
        <ng-container *ngIf="(isApiLoading$ | async)">
            <div class="mb-6">
                <mat-spinner class="spinner" color="primary"></mat-spinner>
            </div>
        </ng-container>
    </ng-container>
    <div class="flat-error-alert" *ngIf="(error$ | async)">
        Error occured while fetching data
    </div>
    <!-- <div class="alertmsg" *ngIf="(isDataFinished$ | async)">
        <div class="flat-no-data-alert flex flex-row">
            No more Users
        </div>
    </div> -->
    <div class="alertmsg" *ngIf="(noDataFound$ | async)">
        <div class="flat-no-data-alert flex flex-row">
            No Users Found
        </div>
    </div>
</div>
<ng-template #cardTemplate>
    <ng-container *ngFor="let card of (apiData$ | async)">
        <ws-public-user-card [userData]=card [allowToMail]="false"></ws-public-user-card>
    </ng-container>
</ng-template>
