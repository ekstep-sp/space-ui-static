<div [hidden]="isRestricted" class="df-container" [ngClass]="{'chat-bg':widgetData.commentsCount }">
  <div class="flex flex-between mb-4 text-white font-semibold" *ngIf = "widgetData.commentsCount">
    <div>Comments ({{widgetData.commentsCount}})</div>
    <div class="text-decoration-line cursor-pointer" (click)="emitToParent(true)">Show All</div>
  </div>
    <div class="discussion-header" [hidden]="widgetData.isLoggedInUserRestricted">
        <!-- <p class="ws-mat-primary-text font-medium text-xl body-font-size-secondary" i18n>Start a new thread</p> -->
        <div class="question-container">
          <ws-widget-user-image
            class="user-image mt-2"
            [userId]="userId"
            [email]="userEmail"
            [userName]="userName"
            [imageType]="'name-initial'"
        >
          </ws-widget-user-image>
          <div class="width-expand flex custom-wrap">
            <!-- [minLength]="'20'" -->
            <ws-widget-editor-quill
              (textData)="onTextChange($event)"
              #editorQuill
              [isDf]="true"
              [showMention]="allowMention"
              (mentionsData)="commentMentions = $event"
              class="width-expand"
            ></ws-widget-editor-quill>
            <a
            name="discussion-forum-post-button"
            type="button"
            (click)="publishConversation(error.value)"
            mat-flat-button
            [disableRipple]="true"
            i18n
            class="btn-send"
            style="background: transparent !important;"
            [title]="widgetData?.isDisabled ? postDisabled.value : postEnabled.value"
            [ngClass]="{'disabled':!isValidPost || isPostingDiscussion || widgetData?.isDisabled}"
          >
          <mat-icon [ngClass]="{'disabled':!isValidPost || isPostingDiscussion || widgetData?.isDisabled, 'chat-send': widgetData.commentsCount && !(!isValidPost || isPostingDiscussion || widgetData?.isDisabled) }" class="send-icon mt-3 line matdark material-icons-outlined">send</mat-icon>
          </a>
          </div>
        </div>
        <!-- <div class="text-right margin-top-xs">
          <button
            name="discussion-forum-post-button"
            [disabled]="!isValidPost || isPostingDiscussion || widgetData?.isDisabled"
            type="button"
            (click)="publishConversation(error.value)"
            mat-raised-button
            color="primary"
            i18n
            [title]="widgetData?.isDisabled ? postDisabled.value : postEnabled.value"
          >
            <span class="font-montserrat">Post</span>
          </button>
          <div></div>
        </div>
        <div></div> -->
      </div>
  <div class="discussion-body mb-6" *ngIf = "!widgetData.commentsCount">
    <!-- <div *ngIf="discussionFetchStatus === 'none'" class="no-conversation mat-toolbar body-font-size-primary" i18n>
      There arenâ€™t any conversations yet
    </div> -->
    <ws-widget-discussion-post
      [post]="reply"
      (deleteSuccess)="onDeletePost(i)"
      [allowMention]="allowMention"
      [parentPostCreatorId]="contentCreatorId"
      (triggerReplyNotification)="triggerReplyCommentNotification($event)"
      *ngFor="let reply of discussionResult.result; let i = index;trackBy:trackByFn"
      [widgetData]="widgetData"
    ></ws-widget-discussion-post>
    <!-- <div
      *ngIf="discussionFetchStatus === 'fetching'"
      class="margin-top-s margin-bottom-s text-center"
    >
      <mat-spinner class="display-inline-block" [strokeWidth]="5"></mat-spinner>
    </div> -->
    <div class="text-center margin-top-s" *ngIf="discussionFetchStatus === 'hasMore'">
      <button
        name="discussion-forum-show-more-posts-button"
        mat-flat-button
        [disabled]="discussionFetchStatus === 'fetching'"
        class="btn-style"
        type="button"
        i18n
        (click)="fetchDiscussion()"
      >
        Show More Posts
      </button>
    </div>
  </div>
</div>

<div [hidden]="!isRestricted">
  <div class="discussion-body mb-6">
    <div class="no-conversation mat-toolbar" i18n>
      Discussion Forum is disabled currently.
    </div>
  </div>
</div>
<!-- PID to corses of group and get all user of that group -->
<input type="hidden" i18n-value value="Conversation published successfully" #publish />
<input type="hidden" i18n-value value="Unable to save. Please retry" #error />
<input type="hidden" i18n-value value="Post" #postEnabled />
<input
  type="hidden"
  i18n-value
  value="Post to Dashboard is disabled for authoring preview mode"
  #postDisabled
/>
