<div class="reply-container margin-left-l">
  <div class="flex postSection">
    <div class="flex flex-middle">
      <ws-widget-user-image class="user-image" [userId]="userId" [userName]="reply.postCreator.name"
        [imageType]="'name-initial'" [email]="reply.postCreator.emailId"></ws-widget-user-image>
      <span class="text-base leading-normal font-medium">{{ reply.postCreator.name }}
      </span>
    </div>
    <div class="flex flex-end datePost">
      <div class="mat-caption" *ngIf="!reply?.lastEdited?.dtLastEdited?.length">
        {{ reply.dtLastModified | date }}
        <ng-container i18n> at </ng-container>
        <ng-container>{{ reply.dtLastModified | date: 'shortTime' }}</ng-container>
      </div>
      <div class="mat-caption" *ngIf="reply?.lastEdited?.dtLastEdited?.length">
        {{ reply.lastEdited?.dtLastEdited | date }}
        <ng-container i18n> at </ng-container>
        <ng-container>{{ reply.lastEdited?.dtLastEdited | date: 'shortTime' }}</ng-container>
      </div>
      <div>
        <button name="discussion-reply-more-options-button" type="button" mat-icon-button [matMenuTriggerFor]="editMenu"
          *ngIf="userId === reply.postCreator.postCreatorId">
          <mat-icon>more_vertical</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <div class="flex margin-top-s">
    <div *ngIf="!editMode" class="margin-left-s margin-auto line-space" [innerHTML]="reply.postContent.body"></div>
  </div>
  <div *ngIf="editMode" class="margin-top-s padding-s mat-primary-border flex">
    <!-- [minLength]="'10'" -->
    <div class="flex align-properly custom-wrap flex-1">
      <ws-widget-editor-quill [showMention]="allowMention" (mentionsData)="replyEditMentions = $event"
        class="margin-left-s margin-auto line-space width-expand" [htmlText]="reply.postContent.body"
        (textData)="onReplyTextChange($event)" [isDfPost]="true" [isDf]="true">
      </ws-widget-editor-quill>
      <a name="discussion-reply-update-button" [disableRipple]="true" type="button" mat-flat-button
        class="margin-top-s update-btn full-width-fold btn-send" i18n
        (click)="editReply(editFailMsg.value)" style="background: transparent !important;">
        <mat-icon [ngClass]="{'disabled': !replyPostEnabled }" class="send-icon line matdark material-icons-outlined">send</mat-icon>
      </a>
    </div>
    <div class="text-right -mt-3">
      <a name="discussion-reply-cancel-update-button" type="button"
        class="margin-top-s update-btn margin-left-s full-width-fold" mat-flat-button [disableRipple]="true" i18n
        (click)="editMode = false">
        Cancel
      </a>
    </div>
  </div>
  <!-- <span class="margin-top-s flex flex-between" *ngIf="reply.activity && reply.status === 'Active'"> -->
  <!-- <span> -->
  <!-- <ws-widget-btn-social-vote class="margin-left-s" [postId]="reply.id" [activity]="reply.activity" [voteType]="'downVote'"
          [postCreatorId]="reply?.postCreator?.postCreatorId">
        </ws-widget-btn-social-vote>
      </span>
      <ws-widget-btn-social-like [postId]="reply.id" [postCreatorId]="reply?.postCreator?.postCreatorId" [activity]="reply.activity">
      </ws-widget-btn-social-like> -->
  <!-- </span> -->
  <!-- </span> -->
</div>
<div *ngIf="reply.activity && reply.status === 'Active'" class="reply-container-2">
  <ws-widget-btn-social-vote [postId]="reply.id" [isDf]="true" [activity]="reply.activity" [voteType]="'upVote'"
    [postCreatorId]="reply?.postCreator?.postCreatorId"></ws-widget-btn-social-vote>
</div>
<mat-menu #editMenu="matMenu">
  <ng-template matMenuContent>
    <button name="discussion-reply-edit-button" type="button" (click)="editMode = true" mat-menu-item i18n>Edit</button>
    <button name="discussion-reply-delete-button" type="button" (click)="deletePost(deleteFailMsg.value)" mat-menu-item
      i18n>
      Delete
    </button>
  </ng-template>
</mat-menu>

<input type="hidden" i8n-value value="Something went wrong! Unable to delete." #deleteFailMsg />
<input type="hidden" i8n-value value="Something went wrong! Unable to post." #editFailMsg />